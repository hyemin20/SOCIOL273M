write.xlsx(kor_com_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_com_na5.xlsx", rowNames = TRUE)
# Drop NAs
us_com_na1 <- us_com[rowSums(is.na(us_com[, 9:27])) <= 5, ]
nrow(us_com_na1)
write.xlsx(us_com_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_com_na5.xlsx", rowNames = TRUE)
gc(); rm(list=ls())
library(readxl); library(openxlsx); library(tidyverse)
kor_demo <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_demo_C.xlsx") %>% tibble()
kor_scr <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_score.xlsx") %>% tibble()
us_demo <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_demo_C.xlsx") %>% tibble()
us_scr <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_score.xlsx") %>% tibble()
kor_com <- left_join(kor_demo, kor_scr, by = "Student")
us_com <- left_join(us_demo, us_scr, by = "Student")
# Create the first data frame
df_combined <- rbind(kor_com, us_com)
nrow(df_combined)
# Drop NAs
df_combined_na1 <- df_combined[rowSums(is.na(df_combined[, 9:27])) <= 7, ]
nrow(df_combined_na1)
a <- nrow(df_combined_na1 %>%
filter(Country == 1))
b <- nrow(df_combined_na1 %>%
filter(Country == 0))
nrow(df_combined_na1 %>%
filter(Country == 1))
nrow(df_combined_na1 %>%
filter(Country == 0))
# Save as excel
write.xlsx(df_combined_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/Combined_scr_na5.xlsx", rowNames = TRUE)
### each country
# Drop NAs
kor_com_na1 <- kor_com[rowSums(is.na(kor_com[, 9:27])) <= 7, ]
nrow(kor_com_na1)
write.xlsx(kor_com_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_com_na5.xlsx", rowNames = TRUE)
# Drop NAs
us_com_na1 <- us_com[rowSums(is.na(us_com[, 9:27])) <= 7, ]
nrow(us_com_na1)
write.xlsx(us_com_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_com_na5.xlsx", rowNames = TRUE)
library(readxl); library(openxlsx); library(tidyverse)
kor_demo <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_demo_C.xlsx") %>% tibble()
kor_scr <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_score.xlsx") %>% tibble()
us_demo <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_demo_C.xlsx") %>% tibble()
us_scr <- read_xlsx("D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/US_score.xlsx") %>% tibble()
kor_com <- left_join(kor_demo, kor_scr, by = "Student")
us_com <- left_join(us_demo, us_scr, by = "Student")
# Create the first data frame
df_combined <- rbind(kor_com, us_com)
nrow(df_combined)
# Drop NAs
df_combined_na <- df_combined[rowSums(is.na(df_combined[, 9:27])) != 19, ]
names(df_combined)
nrow(df_combined_na)
# Drop NAs
df_combined_na1 <- df_combined[rowSums(is.na(df_combined[, 9:27])) <= 7, ]
nrow(df_combined_na1)
nrow(df_combined_na1 %>%
filter(Country == 1))
nrow(df_combined_na1 %>%
filter(Country == 0))
# Save as excel
write.xlsx(df_combined_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/Combined_scr_na5.xlsx", rowNames = TRUE)
### each country
# Drop NAs
kor_com_na1 <- kor_com[rowSums(is.na(kor_com[, 9:27])) <= 7, ]
nrow(kor_com_na1)
write.xlsx(kor_com_na1, "D:/HYEM'S/PH.D/Classes/2nd (24.spring)/EDUC 274B by.Mark/ConQuest/final project/data/KOR_com_na5.xlsx", rowNames = TRUE)
# Drop NAs
us_com_na1 <- us_com[rowSums(is.na(us_com[, 9:27])) <= 7, ]
nrow(us_com_na1)
# Add to this package list for additional SL algorithms
gc(); rm(list=ls())
pacman::p_load(
tidyverse,
dplyr,
ggthemes,
ltmle,
tmle,
SuperLearner,
tidymodels,
caret,
dagitty,
ggdag,
here,
arm,
xgboost,
future)
heart_disease <- read_csv('heart_disease_tmle.csv') %>% tibble()
# Fit SuperLearner Model
## sl lib
## Train/Test split
set.seed(123)
heart_split <- initial_split(heart_disease, prop = 3/4)
## Train SuperLearner
heart_train <- training(heart_split)
y_train <- heart_train %>% pull(mortality)
x_train <- heart_train %>%
dplyr::select(-mortality, -matches(".*_2$"))
heart_test <- testing(heart_split)
y_test <- heart_test %>% pull(mortality)
x_test <- heart_test %>%
dplyr::select(-mortality, -matches(".*_2$"))
## Risk and Coefficient of each model
SL.library <- c("SL.glm", "SL.bayesglm", "SL.glmnet", "SL.randomForest", "SL.lda", "SL.xgboost", "SL.nnet", "SL.knn")
superLL <- SuperLearner(Y = y_train,
X = x_train,
family = binomial(),
SL.library = SL.library)
superLL
## Discrete winner and superlearner ensemble performance
preds <- predict(superLL,
x_test,
onlySL = TRUE)
validation <- y_test %>%
bind_cols(preds$pred[,1]) %>%
rename(obs = `...1`,
pred = `...2`) %>%
mutate(pred = ifelse(pred >= 0.5, 1, 0))
head(validation)
# Cross-validation across cores and Plot
cluster = parallel::makeCluster(availableCores() - 1)
parallel::clusterEvalQ(cluster, library(SuperLearner))
parallel::clusterSetRNGStream(cluster, 1)
cv_superLL = CV.SuperLearner(Y = y_train,
X = x_train,
family = binomial(),
V = 20,              # folds
parallel = cluster,  # note "cluster" is not a string
SL.library = SL.library)
# DAG for TMLE
dagify(Y ~ A1 + A2 + C1 + C2,
A2 ~ A1 + C2,
A1 ~ C0 +C1,
C2 ~ A1 + C0 + C1,
C1 ~ C0,
exposure = "A1",
outcome = "Y",
coords = list(x = c(A1=1, C0=1, C1=1.5, C2=2.5, A2=3, Y=4),
y = c(A1=1, C0=3, C1=2, C2=2, A2=1, Y=1))) %>%
ggdag_status() +
geom_dag_edges() +
theme_dag()
data.frame(
Variable = c("A1", "A2", "C0", "C1", "C2", "Y"),
Description = c("BP Med (treatment)",
"BP Med_2 (treatment)",
"Age, Sex, Race, Income, College Ed",
"BMI, Chol, BP",
"BMI_2, Chol_2, BP_2",
"Mortality (outcome)"))
## Naive Model (no time-dependent confounding) estimate
A1 <- heart_disease %>% pull(blood_pressure_medication)
A2 <- heart_disease %>% pull(blood_pressure_medication_2)
C0_1 <- heart_disease %>% pull(age)
C0_2 <- heart_disease %>% pull(sex_at_birth)
C0_3 <- heart_disease %>% pull(simplified_race)
C0_4 <- heart_disease %>% pull(college_educ)
C0_5 <- heart_disease %>% pull(income_thousands)
C1_1 <- heart_disease %>% pull(bmi)
C1_2 <- heart_disease %>% pull(blood_pressure)
C1_3 <- heart_disease %>% pull(chol)
C2_1 <- heart_disease %>% pull(bmi_2)
C2_2 <- heart_disease %>% pull(blood_pressure_2)
C2_3 <- heart_disease %>% pull(chol_2)
Y <- heart_disease %>% pull(mortality)
data1 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,A1,A2,Y)
data2 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,C2_1,C2_2,C2_3,A1,A2,Y)
result1 <- ltmle(data2,
Anodes = c("A1","A2"),
Lnodes = NULL,
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library)
result2 <- ltmle(data2,
Anodes = c("A1", "A2"),
Lnodes = c("C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library)
dif_val <- result1$estimates[1] - result2$estimates[1]
## sl lib
SL.library <- c("SL.glm", "SL.bayesglm", "SL.glmnet", "SL.randomForest", "SL.xgboost", "SL.nnet", "SL.knn")
## Naive Model (no time-dependent confounding) estimate
A1 <- heart_disease %>% pull(blood_pressure_medication)
A2 <- heart_disease %>% pull(blood_pressure_medication_2)
C0_1 <- heart_disease %>% pull(age)
C0_2 <- heart_disease %>% pull(sex_at_birth)
C0_3 <- heart_disease %>% pull(simplified_race)
C0_4 <- heart_disease %>% pull(college_educ)
C0_5 <- heart_disease %>% pull(income_thousands)
C1_1 <- heart_disease %>% pull(bmi)
C1_2 <- heart_disease %>% pull(blood_pressure)
C1_3 <- heart_disease %>% pull(chol)
C2_1 <- heart_disease %>% pull(bmi_2)
C2_2 <- heart_disease %>% pull(blood_pressure_2)
C2_3 <- heart_disease %>% pull(chol_2)
Y <- heart_disease %>% pull(mortality)
data1 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,A1,A2,Y)
data2 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,C2_1,C2_2,C2_3,A1,A2,Y)
result1 <- ltmle(data2,
Anodes = c("A1","A2"),
Lnodes = NULL,
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library)
## sl lib
SL.library <- c("SL.glm", "SL.glmnet", "SL.randomForest", "SL.nnet", "SL.ranger")
## Naive Model (no time-dependent confounding) estimate
A1 <- heart_disease %>% pull(blood_pressure_medication)
A2 <- heart_disease %>% pull(blood_pressure_medication_2)
C0_1 <- heart_disease %>% pull(age)
C0_2 <- heart_disease %>% pull(sex_at_birth)
C0_3 <- heart_disease %>% pull(simplified_race)
C0_4 <- heart_disease %>% pull(college_educ)
C0_5 <- heart_disease %>% pull(income_thousands)
C1_1 <- heart_disease %>% pull(bmi)
C1_2 <- heart_disease %>% pull(blood_pressure)
C1_3 <- heart_disease %>% pull(chol)
C2_1 <- heart_disease %>% pull(bmi_2)
C2_2 <- heart_disease %>% pull(blood_pressure_2)
C2_3 <- heart_disease %>% pull(chol_2)
Y <- heart_disease %>% pull(mortality)
data1 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,A1,A2,Y)
data2 <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,C2_1,C2_2,C2_3,A1,A2,Y)
result1 <- ltmle(data2,
Anodes = c("A1","A2"),
Lnodes = NULL,
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library)
result2 <- ltmle(data2,
Anodes = c("A1", "A2"),
Lnodes = c("C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library)
dif_val <- result1$estimates[1] - result2$estimates[1]
print(paste("Difference in TMLE estimate:", dif_val))
result1_1 <- tmle::tmle(data,
Y = Y,
A = A,
W = W,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result1_1 <- tmle::tmle(data,
Y = Y,
A = c("A1","A2"),
W = W,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result1_1 <- tmle::tmle(data,
Y = "Y",
A = c("A1","A2"),
W = W,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result1_1 <- tmle::tmle(data,
Y = "Y",
A = c("A1","A2"),
W = NULL,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result1_1 <- tmle::tmle(data,
Y = "Y",
A = "A1",
W = NULL,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result1_1 <- tmle::tmle(data,
Y = "Y",
A = "A1",
W = NULL,
Q.SL.library = SL.library2,
g.SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list(A2 ~ A1 + C2_1 + C2_2 + C2_3,
A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 +C1_1 + C1_2 + C1_3,
C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5),
Qform = Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3,
abar = c(1, 1),
SL.library = SL.library2)
data <- data.frame(C0_1,C0_2,C0_3,C0_4,C0_5,C1_1,C1_2,C1_3,C2_1,C2_2,C2_3,A1,A2,Y)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list(A2 ~ A1 + C2_1 + C2_2 + C2_3,
A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 +C1_1 + C1_2 + C1_3,
C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5),
Qform = Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3,
abar = c(1, 1),
SL.library = SL.library2)
#SL.library <- c("SL.glm", "SL.bayesglm", "SL.glmnet", "SL.randomForest", "SL.xgboost", "SL.nnet", "SL.knn")
SL.library2 <- c('SL.glm', 'SL.glmnet', "SL.nnet", "SL.ranger")
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list(A2 ~ A1 + C2_1 + C2_2 + C2_3,
A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 +C1_1 + C1_2 + C1_3,
C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5,
C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5),
Qform = Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3,
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list("A2" ~ "A1" + "C2_1" + "C2_2" + "C2_3",
"A1" ~ "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5" + "C1_1" + "C1_2" + "C1_3",
"C2_1" ~ "A1" + "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5" + "C1_1" + "C1_2" + "C1_3",
"C2_2" ~ "A1" + "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5" + "C1_1" + "C1_2" + "C1_3",
"C2_3" ~ "A1" + "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5" + "C1_1" + "C1_2" + "C1_3",
"C1_1" ~ "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5",
"C1_2" ~ "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5",
"C1_3" ~ "C0_1" + "C0_2" + "C0_3" + "C0_4" + "C0_5"),
Qform = "Y" ~ "A1" + "A2" + "C1_1" + "C1_2" + "C1_3" + "C2_1" + "C2_2" + "C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c(A2 = "A1 + C2_1 + C2_2 + C2_3",
A1 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_1 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_2 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_3 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C1_1 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
C1_2 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
C1_3 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c(A2 = "A1 + C2_1 + C2_2 + C2_3",
A1 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_1 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_2 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C2_3 = "A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
C1_1 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
C1_2 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
C1_3 = "C0_1 + C0_2 + C0_3 + C0_4 + C0_5"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A2 ~ A1 + C2_1 + C2_2 + C2_3",
"A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
" C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
" C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A2 ~ A1 + C2_1 + C2_2 + C2_3",
"A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
" C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
" C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
" C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A2 ~ A1 + C2_1 + C2_2 + C2_3",
"A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"C2_1 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"C2_2 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"C2_3 ~ A1 + C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"C1_1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
"C1_2 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5",
"C1_3 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A2 ~ A1 + C2_1 + C2_2 + C2_3",
"A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c(("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list(A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3,
A2 ~ A1 + C2_1 + C2_2 + C2_3),
Qform = Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3,
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = list("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y" ~ "A1" + "A2" + "C1_1" + "C1_2" + "C1_3" + "C2_1" + "C2_2" + "C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5","C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result2 <- ltmle(data,
Anodes = c("A1", "A2"),
Lnodes = c("C1_1", "C1_2", "C1_3","C2_1", "C2_2", "C2_3"),
Ynodes = "Y",
gform = c("A1 ~ C0_1 + C0_2 + C0_3 + C0_4 + C0_5 + C1_1 + C1_2 + C1_3",
"A2 ~ A1 + C2_1 + C2_2 + C2_3"),
Qform = "Y ~ A1 + A2 + C1_1 + C1_2 + C1_3 + C2_1 + C2_2 + C2_3",
abar = c(1, 1),
SL.library = SL.library2)
result1_1 <- glm(Y ~ A, data = data)
result1_1 <- glm(Y ~ A1, data = data)
result1_2 <- ltmle(data,
Anodes = c("A1","A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5"),
Ynodes = "Y",
gform = list(),
Qform =
abar = c(1, 1),
result1_2 <- ltmle(data,
Anodes = c("A1","A2"),
Lnodes = c("C0_1","C0_2","C0_3","C0_4","C0_5"),
Ynodes = "Y",
abar = c(1, 1),
SL.library = SL.library2)
